<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">
<head>
	<meta charset="UTF-8" name="viewport" content="width=device-width, shrink-to-fit=no">
	<title>BLAZING - Team Elm</title>
	<!-- jquery -->
	<script type="application/javascript" th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js}"></script>
	<!-- slick.js -->
	<link rel="stylesheet" type="text/css" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css}">
	<script type="application/javascript" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js}"></script>
	<link rel="stylesheet" type="text/css" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css}">
	<!-- popper.js -->
	<script type="application/javascript" th:src="@{https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js}"></script>
	<!-- bootstrap -->
	<link rel="stylesheet" type="text/css" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css}">
	<script type="application/javascript" th:src="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js}"></script>
	<!-- source sans pro -->
	<link th:href='@{https://fonts.googleapis.com/css?family=Source+Sans+Pro}' rel='stylesheet' type='text/css'>
	<!-- font awesome -->
	<link th:href="@{https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css}" rel="stylesheet" type="text/css">
</head>

<link rel="stylesheet" th:href="@{/css/styles.css}">

<body class="bg-dark">
	<header th:insert="/fragments/header.html :: header"></header>
	<div class="container">
		<div class="row">
			<div class="col-12 col-md-auto sidebar sticky-top">
				<section>
					<ul class="nav nav-pills flex-column" id="critics-tabs" role="tablist">
						<li class="nav-item">
							<a class="nav-link active" data-toggle="tab" id="critics-home-tab" href="#critics-home" role="tab">Critics Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" data-toggle="tab" id="critics-list-tab" href="#critics-list" role="tab">Critics List</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" data-toggle="tab" id="critics-groups-tab" href="#critics-groups" role="tab">Critics Groups</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" data-toggle="tab" id="critics-reviews-tab" href="#critics-reviews" role="tab">Latest Film Reviews</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" data-toggle="tab" id="critics-apply-tab" href="#critics-apply" role="tab">Apply for Critic Role</a>
						</li>
					</ul>
				</section>
			</div>
			<div class="col main-content tab-content" id="critics-content">
				<div class="tab-pane fade show active" id="critics-home" role="tabpanel" aria-labelledby="critics-home-tab">
					<section>
						<h5 class="section-header">TOP BLAZING CRITICS</h5>
						<div class="row" id="top-critics-list">
							<!-- list of top critics -->
							<div class="col-4 mb-2">
								<div class="name font-weight-bold">Critic McCriticFace</div>
								<div class="publication">Publication McPublicationFace</div>
								<div class="num-reviews"><span>9001</span> Films Reviewed</div>
							</div>
						</div>
					</section>
					<section>
						<h5 class="section-header">LATEST REVIEWS</h5>
						<div class="row" id="latest-rvw-list">
							<div class="col-6 mb-2">
								<div class="font-weight-bold"><a href="#">Media Title</a></div>
								<div class="mb-2"><span class="icon tiny ashes"></span><span>this is a review. Amazing, isn't it? This is just a placeholder before we implement thymeleaf into it</span></div>
								<div>- <a href="#">Critic McCriticFace</a>, <span>Publication McPublicationFace</span></div>
							</div>
						</div>
					</section>
				</div>
				<div class="tab-pane fade" id="critics-list" role="tabpanel" aria-labelledby="critics-list-tab">
					<section>
						<h5 class="section-header">CRITICS LIST</h5>
						<form class="my-2">
							<select class="custom-select" style="width: 50px;">
								<option value="A">A</option>
								<option value="B">B</option>
								<option value="C">C</option>
								<option value="D">D</option>
								<option value="E">E</option>
								<option value="F">F</option>
								<option value="G">G</option>
								<option value="H">H</option>
								<option value="I">I</option>
								<option value="J">J</option>
								<option value="K">K</option>
								<option value="L">L</option>
								<option value="M">M</option>
								<option value="N">N</option>
								<option value="O">O</option>
								<option value="P">P</option>
								<option value="Q">Q</option>
								<option value="R">R</option>
								<option value="S">S</option>
								<option value="T">T</option>
								<option value="U">U</option>
								<option value="V">V</option>
								<option value="W">W</option>
								<option value="X">X</option>
								<option value="Y">Y</option>
								<option value="Z">Z</option>
							</select>
						</form>
						<div>
							<ul class="list-group">
								<li class="list-group-item" th:each="u : ${critics}">
									<a th:href="@{/viewprofile/{id}(id=${u.id})}" th:text="|${u.firstName} ${u.lastName}|">critic</a>
								</li>
							</ul>
						</div>
					</section>
				</div>
				<div class="tab-pane fade" id="critics-groups" role="tabpanel" aria-labelledby="critics-groups-tab">
					<section>
						<h5 class="section-header">CRITICS GROUP</h5>
						<div>
							<ul class="list-group list-group-flush">
								<li class="list-group-item"><a th:href="@{http://www.bostonfilmcritics.org/}">Boston Society of Film Critics</a></li>
								<li class="list-group-item"><a th:href="@{http://www.criticschoice.com/bfca/}">Broadcast Film Critics Association</a></li>
								<li class="list-group-item"><a th:href="@{https://chicagofilmcritics.org/}">Chicago Film Critics Association</a></li>
								<li class="list-group-item"><a th:href="@{http://dfwfilmcritics.com/}">Dallas-Fort Worth Film Critics Association</a></li>
								<li class="list-group-item"><a th:href="@{http://detroitfilmcritics.com/}">Detroit Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{http://www.fcca.com.au/}">Film Critics Circle of Australia</a></li>
								<li class="list-group-item"><a th:href="@{http://www.floridafilmcritics.com/}">Florida Film Critics Circle</a></li>
								<li class="list-group-item"><a th:href="@{http://www.houstonfilmcritics.org/}">Houston Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{https://kcfcc.org/history/}">Kansas City Film Critics Circle</a></li>
								<li class="list-group-item"><a th:href="@{http://www.lvfcs.org/}">Las Vegas Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{http://www.criticscircle.org.uk/film/}">London Film Critics Circle</a></li>
								<li class="list-group-item"><a th:href="@{http://www.lafca.net/}">Los Angeles Film Critics Association</a></li>
								<li class="list-group-item"><a th:href="@{https://nationalsocietyoffilmcritics.com/}">National Society of Film Critics</a></li>
								<li class="list-group-item"><a th:href="@{http://www.nevadafilmcriticssociety.org/}">Nevada Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{http://www.nyfcc.com/}">New York Film Critics Circle</a></li>
								<li class="list-group-item"><a th:href="@{http://nyfco.proboards.com/}">New York Film Critics Online</a></li>
								<li class="list-group-item"><a th:href="@{http://ofcs.org/}">Online Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{https://philafcc.org/}">Philadelphia Film Critics Circle</a></li>
								<li class="list-group-item"><a th:href="@{https://www.phoenixfilmcriticssociety.org/}">Phoenix Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{http://www.sdfcs.org/}">San Diego Film Critics Society</a></li>
								<li class="list-group-item"><a th:href="@{http://sffcc.org/}">San Francisco Film Critics Circle</a></li>
								<li class="list-group-item"><span>Santa Fe Film Critics Circle</span></li>
								<li class="list-group-item"><span>Southeastern Film Critics Association</span></li>
								<li class="list-group-item"><a th:href="@{http://www.torontofilmcritics.com/}">Toronto Film Critics Association</a></li>
								<li class="list-group-item"><a th:href="@{https://vancouverfilmcritics.com/}">Vancouver Film Critics Circle</a></li>
								<li class="list-group-item"><a th:href="@{http://www.dcfilmcritics.com/}">Washington, D.C. Area Film Critics Association</a></li>
							</ul>
						</div>
					</section>
				</div>
				<div class="tab-pane fade" id="critics-reviews" role="tabpanel" aria-labelledby="critics-reviews-tab">
					<section>
						<h5 class="section-header">LATEST FILM REVIEWS</h5>
						<div>
							<table class="table">
								<thead>
									<tr>
										<th scope="col">Rating</th>
										<th scope="col">Movie</th>
										<th scope="col">Review</th>
										<th scope="col">Critic</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="align-middle" style="width: 75px;"><span class="icon tiny ashes"></span> <span>Score</span></td>
										<td class="align-middle" style="width: 175px;"><span>Movie McMovieFace</span></td>
										<td class="align-middle">
											<div>
												"<a href="#">Amazing!</a>"
											</div>
											<div>
												Posted <span>datetime</span>
											</div>
										</td>
										<td class="align-middle" style="width: 175px;">
											<a href="#">Critic McCriticFace</a>
											<a href="#">Publication</a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</section>
				</div>
				<div class="tab-pane fade" id="critics-apply" role="tabpanel" aria-labelledby="critics-apply-tab">
					<section>
						<h5 class="section-header">APPLY TO BECOME A CRITIC</h5>
						<div class="m-2 p-2">
							description of how to apply and rules for being a critic
						</div>
						<div class="w-100 text-center p-2 border" th:if="${session.currentUser}">
							<form th:unless="${session.currentUser.role.name() == 'CRITIC'} or ${session.currentUser.role.name() == 'ADMIN'}">
								<div>If you want to apply, please write a reason why you want to contribute to the Blazing community.</div>
								<div class="w-100"><textarea class="w-75" id="apply-desc" rows="5"></textarea></div>
								<small class="text-danger" id="no-desc-apply" style="display: none;">Please enter your reason of applying</small>
								<button type="submit" id="critic-apply-button" class="font-weight-bold btn btn-success btn-lg">APPLY</button>
							</form>
							<script th:inline="javascript">
							/*<![CDATA[*/
							function apply(id, body){
								var app = {};
								app["body"] = body;
								app["userId"] = id;
								var jsonString = JSON.stringify(app);
								$.ajax({
									type : "POST",
									url : location.href + "/apply",
									contentType: "application/json",
									data : jsonString,
									success : function(data) {
										console.log(data);
										if (data){
											location.reload();	
										}else{
											
										}
									},
									error : function(e) {
										console.log("ERROR: ", e);
									}
								});
							}
							$(function(){
								$("#critic-apply-button").on("click", function(e){
									e.preventDefault();
									$("#no-desc-apply").hide();
									var body = $("#apply-desc").val();
									var userId = /*[[${session.currentUser.id}]]*/ 0;
									console.log(userId);
									if (body.length == 0){
										$("#no-desc-apply").show();
										return;
									}else{
										apply(userId, body);
									}
								});
							});
							/*]]>*/
							</script>
						</div>
					</section>
				</div>
			</div>
		</div>
	</div>
	<footer th:insert="/fragments/footer.html :: footer"></footer>
</body>

<script type="application/javascript" th:src="@{/js/properties.js}"></script>
<script type="application/javascript" th:src="@{/js/main.js}"></script>

</html>